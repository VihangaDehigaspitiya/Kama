<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/libraries/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="/libraries/fontawesome-free-5.11.2-web/css/all.min.css" />
    <!-- <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script> -->
    <script src="/libraries/fontawesome-free-5.11.2-web/js/all.min.js"></script>
    <script src="/libraries/jquery-1.11.1/jquery-1.11.1.min.js"></script>
    <script src="/libraries/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <link rel="stylesheet" href="/assets/css/card.css" />


    <style>
        .login-card .ui-block-a {
            background: linear-gradient(180deg, #FF9F40 0%, #FF8C49 17.63%, #FF8A4A 35.61%, #FF7256 53.65%, #FF406E 100%) !important;
            height: 500px !important;
        }
        
        .login-card {
            width: 65%;
            border-radius: 30px;
            overflow: hidden !important;
        }
        
        .login-card .ui-block-b {
            padding: 20px;
        }
        
        .login-btn:focus,
        #popupChangeUser .ui-content .ui-grid-a a:focus {
            box-shadow: none !important;
        }
        
        .login-btn {
            /* background: linear-gradient(180deg, #FF9F40 0%, #E60CA5 100%) !important; */
            background: linear-gradient(180deg, #FF9F40 0%, #FF8C49 17.63%, #FF8A4A 35.61%, #FF7256 53.65%, #FF406E 100%) !important;
            border-radius: 25px !important;
            margin-top: 25px !important;
            width: 30% !important;
            display: flex !important;
            justify-content: center !important;
            color: white !important;
            font-family: Helvetica;
            font-style: normal !important;
            font-weight: normal !important;
            font-size: 16px !important;
            color: rgba(255, 255, 255, 1);
            letter-spacing: 2px !important;
            text-shadow: none !important;
        }
        
        .login-container {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            flex-direction: column !important;
        }
        
        .ui-input-text {
            border-color: red !important;
            border-radius: 20px;
            width: 50%;
            font-size: small;
        }
        
        .ui-input-text input {
            margin-left: 8px;
        }
        
        .login-container .login-card .ui-block-b {
            margin-top: 100px;
            display: flex;
            align-items: center;
            /* justify-content: center; */
            flex-direction: column;
        }
        
        .login-container .ui-block-a {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .icon-container svg {
            margin-right: 20px !important;
            color: salmon;
            /* background: -webkit-gradient(linear, left top, right top, color-stop(.5, blue), color-stop(1, orange)); */
            /* background: gradient(linear, left top, right top, color-stop(0.5, blue), color-stop(1, orange)) !important; */
            /* fill: linear-gradient(180deg, #FF9F40 0%, #E60CA5 100%) !important; */
            /* color: transparent !important; */
            /* color: #3c8e25; */
        }
        
        .login-container .login-card .ui-block-b p {
            /* margin: 0; */
            font-family: Helvetica;
            font-style: normal;
            font-weight: normal;
            font-size: 14px;
            color: rgba(167, 167, 167, 1);
            letter-spacing: 0.5px;
        }
        
        .login-container .ui-block-b p a,
        .portrait-login-container p a {
            cursor: pointer !important;
            color: #E85E52 !important;
            font: caption !important;
        }
        
        .login-container .signup-link,
        .portrait-login-container .signup-link {
            text-decoration: none !important;
        }
        
        .login-container .ui-block-b p a:hover,
        .portrait-login-container p a:hover {
            color: red !important;
        }
        /* popup css */
        
        #popupChangeUser-popup {
            top: 252.5px;
            left: 334px;
            width: 400px;
        }
        
        #popupChangeUser .ui-content {
            padding-top: 25px !important;
        }
        
        #popupChangeUser .ui-block-b {
            margin: 0 !important;
        }
        
        #popupChangeUser .ui-content .ui-grid-a a p {
            margin: 0;
            color: white !important;
        }
        
        #popupChangeUser .ui-content .ui-grid-a a {
            background: linear-gradient(180deg, #FF9F40 0%, #FF8C49 17.63%, #FF8A4A 35.61%, #FF7256 53.65%, #FF406E 100%) !important;
            border-radius: 30px !important;
            text-shadow: none !important;
            color: white !important;
            letter-spacing: 1px !important;
        }
        
        #popupChangeUser .ui-content .ui-grid-a p {
            text-align: center;
            color: lightslategrey;
        }
        
        #popupChangeUser .ui-content .ui-grid-a .button-container {
            display: flex;
            justify-content: center;
        }
        /** ipad potrait **/
        
        @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: portrait) {
            .login-card {
                display: none !important;
            }
            .portrait-login-container {
                display: block !important;
            }
            .ui-input-text {
                width: 29% !important;
            }
        }
    </style>


</head>

<body>
    <div data-role="page" class="login-container">
        <!-- <div data-role="content"> -->
        <div class="card login-card">
            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <img src="/assets/images/kaama_df@2x.png" width="60%">
                </div>
                <div class="ui-block-b">
                    <input type="text" name="email" id="email" placeholder="Username">
                    <input type="password" name="password" id="password" placeholder="Password">
                    <button onclick="login()" class="login-btn">LOGIN</button>
                    <p>Or Sign up with</p>
                    <div class="icon-container">
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-google"></i>
                    </div>
                    <p>Don't have an account? <a class="signup-link" href="#popupChangeUser" data-rel="popup" data-position-to="window" data-transition="pop" role="button">Sign up</a></p>

                </div>
            </div>
        </div>


        <div class="portrait-login-container" style="display: none;">

            <div class="ui-grid-solo">
                <div class="ui-block-a">
                    <img src="/assets/images/login_header@2x.png" style="margin-top:-700px;">
                    <img src="/assets/images/kaama_df@2x.png" width="50%" style="position: absolute;">
                </div>
            </div>

            <div class="ui-grid-solo">
                <div class="ui-block-a" style="height: 381px;">
                    <input type="text" name="email" id="email" placeholder="Username" style="font-size: medium;">
                    <input type="password" name="password" id="password" placeholder="Password" style="font-size: medium;">
                    <button onclick="login()" class="login-btn ui-btn ui-shadow ui-corner-all">LOGIN</button>
                    <p>Or Sign up with</p>
                    <div class="icon-container">
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-twitter"></i>
                        <i class="fab fa-google"></i>
                    </div>
                    <p>Don't have an account? <a class="signup-link" href="#popupChangeUser" data-rel="popup" data-position-to="window" data-transition="pop" role="button">Sign up</a></p>
                </div>
            </div>

            <div class="ui-grid-solo">
                <div class="ui-block-a">
                    <img src="/assets/images/login_footer.png">
                </div>
            </div>

            <!-- <div class="ui-grid-a">
            <div class="ui-block-a">
                <img src="/assets/images/kaama_df@2x.png" width="60%">
            </div>
            <div class="ui-block-b">
                <input type="text" name="" id="" placeholder="Username">
                <input type="text" name="" id="" placeholder="Password">
                <button class="login-btn">LOGIN</button>
                <p>Or Sign up with</p>
                <div class="icon-container">
                    <i class="fab fa-facebook-f"></i>
                    <i class="fab fa-twitter"></i>
                    <i class="fab fa-google"></i>
                </div>
                <p>Don't have an account? <a>Sign up</a></p>

            </div>
        </div> -->


        </div>
        <div data-role="popup" id="popupChangeUser" data-overlay-theme="a" data-theme="a" data-dismissible="true" style="max-width:400px;">
            <div>
                <a role="button" href="#" class="ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-right" data-transition="fade" data-rel="back" data-direction="reverse">Close</a>
            </div>
            <div role="main" class="ui-content">
                <div class="ui-grid-a">
                    <div class="ui-block-a">
                        <p>Service provider sign up to register your homre business</p>
                        <div class="button-container">
                            <a href="/app/ipad/serviceprovider/signup.html" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" rel="external">
                                <p>Service Provider</p> Sign Up</a>
                        </div>
                    </div>
                    <div class="ui-block-b">
                        <p>Customer sign up to browsw through restaurants</p>
                        <div class="button-container">
                            <a href="/app/ipad/customer/signup.html" class="ui-btn ui-corner-all ui-shadow ui-btn-inline" rel="external">
                                <p>Customer</p> Sign Up</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script>
    $(document).ready(function() {
        $(".ui-input-text input").focus(function() {
            $(this).parent().removeClass("ui-focus")
        });
    });


    function login() {
        console.log("Working");
        $.ajax({
            url: `http://localhost/Kama/index.php/UserController/login`,
            method: 'POST',
            dataType: "json",
            data: {
                "userName": $("#email").val(),
                "password": $("#password").val(),
            },
        }).done(function(data) {
            console.log(data);
            if (data.state) {
                console.log(data);
                if (data.data.isRestaurant == 1) {
                    window.location.href = "../shared/sploginloader.html"
                } else {
                    window.location.href = "customer/home.html"
                }
                localStorage.setItem("UserId", data.data.id);
            } else {

            }


        });
    }
</script>